<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Nómina HAMB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0f1218">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/airbnb.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="icon" href="img/Logo.png" type="image/png">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <div class="container">
    <header class="app-header">
      <div class="header-left">
  <img src="img/Logo.png" class="brand-logo" alt="Hambings" />
        <div class="titles">
          <div class="welcome">Hola, bienvenido</div>
          <h2>Calculadora de Nómina</h2>
        </div>
      </div>
      <button type="button" id="themeToggle" class="icon-btn" aria-label="Cambiar tema" title="Cambiar tema">
        <svg class="icon-sun" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path fill="currentColor" d="M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.79 1.8-1.79zm10.48 14.32l1.79 1.79 1.79-1.79-1.79-1.79-1.79 1.79zM12 4V1h-0v3h0zm0 19v-3h0v3h0zm8-11h3v0h-3v0zm-19 0h3v0H1v0zm15.24-6.16l1.8-1.79-1.79-1.79-1.79 1.79 1.78 1.79zM4.84 17.24l-1.79 1.79 1.79 1.79 1.79-1.79-1.79-1.79zM12 6a6 6 0 100 12 6 6 0 000-12z"/></svg>
        <svg class="icon-moon" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path fill="currentColor" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
      </button>
    </header>
    <!-- Panel de configuración -->
    <div class="config-panel">
  <button type="button" class="config-expander" id="advancedConfigToggle" aria-expanded="false" aria-controls="advancedConfig">
        <span class="label">Mostrar configuración adicional</span>
        <span class="chevron" aria-hidden="true">▾</span>
      </button>

      <div class="advanced-config hidden" id="advancedConfig">

      <div class="config-section compact period-section">
        <div class="section-title">Periodo de nómina</div>
        <div class="field-grid single">
          <div>
            <label class="field-label" for="periodoNomina">Mes del cálculo</label>
            <input type="month" id="periodoNomina">
          </div>
        </div>
      </div>

      <div class="config-section">
        <div class="section-header">
          <label class="switch small" for="vacacionesEnabled">
            <input type="checkbox" id="vacacionesEnabled">
            <span class="slider" aria-hidden="true"></span>
          </label>
          <div class="section-titles">
            <div class="section-title">Vacaciones</div>
            <div class="section-helper">Calcula vacaciones sin perder el control de los días.</div>
          </div>
        </div>
        <div class="section-body hidden" id="vacacionesBody">
          <label class="field-label" for="vacacionesRango">Rango de fechas</label>
          <input type="text" id="vacacionesRango" class="calendar-input" placeholder="Selecciona un rango" readonly>
          <div class="field-grid">
            <div>
              <label class="field-label" for="vacacionesDias">Días de vacaciones</label>
              <input type="number" id="vacacionesDias" min="0" max="30" step="0.01" value="0">
            </div>
            <div>
              <label class="field-label" for="vacacionesMontoManual">Valor pagado</label>
              <div class="manual-wrapper">
                <input type="number" id="vacacionesMontoManual" min="0" step="1000" placeholder="Calculado" disabled>
                <label class="manual-toggle"><input type="checkbox" id="vacacionesMontoManualEnabled">Editar</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="config-section">
        <div class="section-header">
          <label class="switch small" for="incapacidadEnabled">
            <input type="checkbox" id="incapacidadEnabled">
            <span class="slider" aria-hidden="true"></span>
          </label>
          <div class="section-titles">
            <div class="section-title">Incapacidad</div>
            <div class="section-helper">Considera incapacidades de origen común o laboral.</div>
          </div>
        </div>
        <div class="section-body hidden" id="incapacidadBody">
          <label class="field-label" for="incapacidadTipo">Tipo de incapacidad</label>
          <select id="incapacidadTipo">
            <option value="comun">Origen común</option>
            <option value="laboral">Origen laboral</option>
          </select>
          <label class="field-label" for="incapacidadRango">Días afectados</label>
          <input type="text" id="incapacidadRango" class="calendar-input" placeholder="Selecciona rango" readonly>
          <div class="field-grid">
            <div>
              <label class="field-label" for="incapacidadDias">Total de días</label>
              <input type="number" id="incapacidadDias" min="0" max="540" step="0.01" value="0">
            </div>
            <div>
              <label class="field-label" for="incapacidadMontoManual">Valor pagado</label>
              <div class="manual-wrapper">
                <input type="number" id="incapacidadMontoManual" min="0" step="1000" placeholder="Calculado" disabled>
                <label class="manual-toggle"><input type="checkbox" id="incapacidadMontoManualEnabled">Editar</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="config-section">
        <div class="section-header">
          <label class="switch small" for="permisoEnabled">
            <input type="checkbox" id="permisoEnabled">
            <span class="slider" aria-hidden="true"></span>
          </label>
          <div class="section-titles">
            <div class="section-title">Permisos</div>
            <div class="section-helper">Incluye permisos remunerados o no remunerados dentro del periodo.</div>
          </div>
        </div>
        <div class="section-body hidden" id="permisoBody">
          <label class="field-label" for="permisoTipo">Tipo de permiso</label>
          <select id="permisoTipo">
            <option value="remunerado">Remunerado</option>
            <option value="no_remunerado">No remunerado</option>
          </select>
          <label class="field-label" for="permisoRango">Fechas del permiso</label>
          <input type="text" id="permisoRango" class="calendar-input" placeholder="Selecciona rango" readonly>
          <div class="field-grid">
            <div>
              <label class="field-label" for="permisoDias">Total de días</label>
              <input type="number" id="permisoDias" min="0" max="30" step="0.01" value="0">
            </div>
            <div>
              <label class="field-label" for="permisoMontoManual">Valor pagado</label>
              <div class="manual-wrapper">
                <input type="number" id="permisoMontoManual" min="0" step="1000" placeholder="Calculado" disabled>
                <label class="manual-toggle"><input type="checkbox" id="permisoMontoManualEnabled">Editar</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="config-section extras-section">
        <div class="section-header">
          <label class="switch small" for="extrasEnabled">
            <input type="checkbox" id="extrasEnabled">
            <span class="slider" aria-hidden="true"></span>
          </label>
          <div class="section-titles">
            <div class="section-title">Horas extra y recargos</div>
            <div class="section-helper">Introduce las horas trabajadas; se liquidan según el salario y la normativa.</div>
          </div>
        </div>
        <div class="section-body hidden" id="extrasBody">
          <div class="section-helper">Agrega únicamente los conceptos necesarios. Cada línea permite escoger tipo y horas trabajadas.</div>
          <div id="extrasList" class="extras-list" aria-live="polite"></div>
          <button type="button" id="extrasAddBtn" class="btn btn-ghost">Agregar concepto</button>
        </div>
      </div>

      <div class="config-section compact">
        <div class="section-title">Comisiones y otros ingresos</div>
        <div class="field-grid">
          <div>
            <label class="field-label" for="comisionesMonto">Comisiones</label>
            <input type="number" id="comisionesMonto" min="0" step="500" value="0">
          </div>
        </div>
      </div>

      </div>

      <div id="daysWarning" class="days-warning hidden"></div>
    </div>
    <form id="formNomina">
      <table>
        <tr>
          <th>Concepto</th>
          <th>Valor 30 días</th>
          <th>Días</th>
        </tr>
        <tr>
          <td>Salario Básico</td>
          <td><input type="number" id="salario" value="0" min="0"></td>
          <td><input type="number" id="diasSalario" class="diasmini" min="0" max="30" step="0.01" value="30"></td>
        </tr>
        <tr>
          <td>Bono Extralegal</td>
          <td><input type="number" id="bono1" value="0" min="0"></td>
          <td><input type="number" id="diasBono1" class="diasmini" min="0" max="30" step="0.01" value="30"></td>
        </tr>
        <tr>
          <td>Bono Alimentación</td>
          <td><input type="number" id="bono2" value="0" min="0"></td>
          <td><input type="number" id="diasBono2" class="diasmini" min="0" max="30" step="0.01" value="30"></td>
        </tr>
        <tr>
          <td>Novedades (reembolsos)</td>
          <td colspan="2"><input type="number" id="novedades" value="0" min="0" placeholder="0"></td>
        </tr>
        <tr>
          <td>Seguro Los Olivos</td>
          <td colspan="2"><input type="number" id="seguro" min="0" value="0" placeholder="0"></td>
        </tr>
      </table>
  <button type="submit" class="btn btn-primary">Calcular Nómina</button>
  <button type="button" id="btnPDF" class="btn btn-secondary hidden">Descargar PDF</button>
    </form>
    <div class="results" id="results"></div>
    <!-- Sección de bauche detallado removida por ahora; se podrá reactivar a futuro -->
  </div>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
<script src="js/script.js"></script>

</body>
</html>
